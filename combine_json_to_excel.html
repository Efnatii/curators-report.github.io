              <div class="file-picker file-picker--split">
                <div class="file-picker__option">
                  <input id="jsonFiles" type="file" accept="application/json" multiple class="file-input" />
                  <div class="file-picker__control" aria-hidden="true">
                    <span class="file-picker__button">Добавить файлы</span>
                    <span class="file-picker__hint">Выбор отдельных JSON</span>
                  </div>
                <div class="file-picker__option">
                  <input id="jsonFolder" type="file" accept="application/json" webkitdirectory directory class="file-input" />
                  <div class="file-picker__control" aria-hidden="true">
                    <span class="file-picker__button">Выбрать папку</span>
                    <span class="file-picker__hint">Найдём все JSON в каталоге</span>
                  </div>
                </div>
              </div>
              <div class="file-picker__meta" aria-live="polite">
                <span class="file-picker__count" id="fileCount">Файлы не выбраны</span>
              <span class="checkbox__text">
                <span class="checkbox__title">Сформировать PDF по баллам</span>
                <span class="checkbox__hint">Сохраняет общий отчёт со скоринговыми данными</span>
              </span>
      const folderInput = document.getElementById("jsonFolder");
      const fileCountLabel = document.getElementById("fileCount");

      const pluralizeFiles = (count) => {
        const mod10 = count % 10;
        const mod100 = count % 100;
        if (mod10 === 1 && mod100 !== 11) return "файл";
        if (mod10 >= 2 && mod10 <= 4 && (mod100 < 10 || mod100 >= 20)) return "файла";
        return "файлов";
      };

      const collectSelectedFiles = () => [
        ...(fileInput?.files ? Array.from(fileInput.files) : []),
        ...(folderInput?.files ? Array.from(folderInput.files) : []),
      ];

      const updateFileCount = () => {
        const fileCount = fileInput?.files?.length || 0;
        const folderCount = folderInput?.files?.length || 0;
        const total = fileCount + folderCount;

        if (!total) {
          fileCountLabel.textContent = "Файлы не выбраны";
          return;
        }

        const parts = [];
        if (fileCount) parts.push(`${fileCount} ${pluralizeFiles(fileCount)} через кнопку файлов`);
        if (folderCount) parts.push(`${folderCount} ${pluralizeFiles(folderCount)} из папки`);
        fileCountLabel.textContent = `${total} ${pluralizeFiles(total)}: ${parts.join(" · ")}`;
      };

      const handleSelectionChange = () => {
        updateFileCount();
        setStatus("Файлы выбраны, можно сформировать отчёты.");
      };

      [fileInput, folderInput].forEach((input) => input?.addEventListener("change", handleSelectionChange));
      updateFileCount();
        const files = collectSelectedFiles();
        if (!files.length) {
