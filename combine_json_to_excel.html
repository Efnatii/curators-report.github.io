            <div class="field">
              <span class="field__label">Выберите JSON-файлы:</span>
              <div class="file-picker-grid">
                <div class="file-picker">
                  <input id="jsonFiles" type="file" accept="application/json" multiple class="file-input" />
                  <div class="file-picker__control" aria-hidden="true">
                    <span class="file-picker__button">Выбрать файлы</span>
                    <span class="file-picker__hint">Отдельные JSON-файлы</span>
                  </div>
                </div>
                <div class="file-picker">
                  <input id="jsonFolder" type="file" accept="application/json" webkitdirectory class="file-input" />
                  <div class="file-picker__control" aria-hidden="true">
                    <span class="file-picker__button">Выбрать папку</span>
                    <span class="file-picker__hint">Собрать все JSON из папки</span>
                  </div>
              <p class="file-counter" id="fileCounter">Файлы не выбраны</p>
            </div>
            <div class="option-card">
              <label class="checkbox checkbox--inline" for="generatePdfs">
                <input id="generatePdfs" type="checkbox" />
                <span class="checkbox__text">Сформировать PDF по баллам</span>
              </label>
              <p class="checkbox__hint">PDF сформируется только при отмеченной галочке.</p>
            </div>
              <p class="button__note">Можно объединять выбор файлов и папок.</p>
      const filesInput = document.getElementById("jsonFiles");
      const folderInput = document.getElementById("jsonFolder");
      const fileCounter = document.getElementById("fileCounter");
      let isReady = false;
      const getSelectedFiles = () => {
        const combined = [
          ...Array.from(filesInput?.files || []),
          ...Array.from(folderInput?.files || []),
        ].filter((file) => file && file.name.toLowerCase().endsWith(".json"));

        const deduped = new Map();
        combined.forEach((file) => deduped.set(`${file.name}-${file.size}-${file.lastModified}`, file));
        return Array.from(deduped.values());
      };

      const updateFileCounter = () => {
        const files = getSelectedFiles();
        const total = files.length;
        fileCounter.textContent = total ? `Выбрано файлов: ${total}` : "Файлы не выбраны";
        return files;
      };

      const handleSelectionChange = () => {
        const files = updateFileCounter();
        combineBtn.disabled = !isReady || !files.length;
        setStatus(files.length ? `Выбрано файлов: ${files.length}` : "Ожидание файлов…");
      };

      filesInput.addEventListener("change", handleSelectionChange);
      folderInput.addEventListener("change", handleSelectionChange);

        isReady = true;
        handleSelectionChange();
        const files = getSelectedFiles();
